generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Effectif {
  id          Int      @id @default(autoincrement())
  prenom      String
  nom         String
  nomPJ       String
  poste       String
  statut      String   @default("Actif")
  telephone   String?
  formations  Json?    @default("[]")
  dateArrivee DateTime @default(now())
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  grade       String?

  @@map("effectif")
}

model Enquete {
  id              Int      @id @default(autoincrement())
  objet           String
  accusations    String
  directeur      String
  directeurAdjoint String
  statut         String   @default("Début")
  archived       Boolean  @default(false)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("enquete")
}

enum Grade {
  PA
  E_GPX
  GPX_S
  GPX
  B_C_Normal
  B_C_Sup
  MAJ
  MEEX
  MAJRULP
  E_CPT
  CPT_S
  LTN
  CNE
  CDT
  CDTD
  CDTEF
  E_COM
  COM
  CD
  CG
}

model Note {
  id        Int      @id @default(autoincrement())
  content   String
  updatedAt DateTime @updatedAt
}

model NoteEnquetes {
  id        Int      @id @default(autoincrement())
  enqueteId Int
  content   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("note_enquetes")
}

model EnqueteSection {
  id        Int      @id @default(autoincrement())
  enqueteId Int
  sectionId String   // Identifiant unique de la section (ex: "identite", "documents")
  data      Json     // Données de la section au format JSON
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([enqueteId, sectionId])
  @@map("enquete_section")
}

